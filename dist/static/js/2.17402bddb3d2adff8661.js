webpackJsonp([2],{Cdx3:function(e,t,n){var a=n("sB3e"),i=n("lktj");n("uqUo")("keys",function(){return function(e){return i(a(e))}})},HiHq:function(e,t,n){"use strict";var a=n("mvHQ"),i=n.n(a),o=n("fZjL"),s=n.n(o),l={name:"baseTable",created:function(){var e=this;this.thArr.forEach(function(t){e.addDialog[t.key]=null}),this.DataKeys.forEach(function(t){e.checkinfo[t]=""})},props:{totalData:{type:Array,default:function(){return[]}},thArr:{type:Array,default:function(){return[]}},config:{type:Object,default:function(){return{}}}},watch:{thArr:{handler:function(e,t){this.$emit("theadvar",e)},deep:!0}},data:function(){return{form:{search:"",option:""},editDialog:{},addDialog:{},checkinfo:{},Visible:{Add:!1,Edit:!1,check:!1},editingId:null,selectedrows:[],downloadLoading:!1}},computed:{loading:function(){return!(this.totalData.length>0)},DataKeys:function(){return 0!==this.totalData.length?s()(this.totalData[0]):[]},totalCount:function(){return this.totalData.length},tableData:function(){var e=this.config.pagination.pageSize,t=this.config.pagination.currentPage;return 0!==this.totalData.length?this.totalData.slice((t-1)*e,e*t):[]},candel:function(){return!this.selectedrows.length}},methods:{search:function(){var e=this.form.search;new RegExp(e);this.$emit("search",e)},handleEdit:function(e,t){this.Visible.Edit=!0,this.editDialog=JSON.parse(i()(t)),this.editingId=t.id},SaveEdit:function(e){var t=this;this.$refs.Editform.validate(function(e){e?(t.$emit("saveedit",JSON.parse(i()(t.editDialog))),t.resetForm("Editform"),t.Visible.Edit=!1):t.$message({type:"warning",message:"验证失败！"})})},CheckDetail:function(e,t){this.checkinfo=JSON.parse(i()(t)),this.Visible.check=!0},Addsys:function(){this.Visible.Add=!0},SaveAdd:function(){var e=this;this.$refs.Addform.validate(function(t){if(t){e.addDialog.id=Math.ceil((new Date).getTime()*(Math.random()+.5));var n=JSON.parse(i()(e.addDialog));e.$emit("addinfo",n),e.resetForm("Addform"),e.Visible.Add=!1}else e.$message({type:"warning",message:"验证失败！"})})},resetForm:function(e){this.$refs[e].resetFields()},CancelAction:function(){this.Visible.Edit=!1,this.Visible.check=!1,this.resetForm("Editform")},CancelAdd:function(){this.Visible.Add=!1,this.resetForm("Addform")},handleDelete:function(e,t){this.delete(t)},handleSizeChange:function(e){this.config.pagination.pageSize=e},handleCurrentChange:function(e){this.config.pagination.currentPage=e},delete:function(e){this.$emit("deleteRow",e)},SelectionChange:function(e){this.selectedrows=e,this.$emit("selecting",e)},delrows:function(){this.$emit("delrows",this.selectedrows)},handleDownload:function(){var e=this;this.downloadLoading=!0,n.e(28).then(n.bind(null,"zWO4")).then(function(t){var n=e.DataKeys,a=e.DataKeys,i=e.totalData,o=e.formatJson(a,i);t.export_json_to_excel(n,o,"excel"),e.downloadLoading=!1})},formatJson:function(e,t){return t.map(function(t){return e.map(function(e){return t[e]})})},getdb:function(){HTTP.post("/api/sysinfo",{sysinfo:"xiaolin",key_nd:"国务院",key_rd:"委员会",key_4th:999}).then(function(e){console.log(e.data)}).catch(function(e){console.log(e)})}}},r={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"baseTable"},[n("div",{staticClass:"control"},[n("el-form",{ref:"form",attrs:{"status-icon":!0,model:e.form,"label-width":"80px"}},[n("el-form-item",{attrs:{label:"添加筛选"}},[n("el-select",{attrs:{placeholder:"请选择筛选项"},model:{value:e.form.option,callback:function(t){e.$set(e.form,"option",t)},expression:"form.option"}},[n("el-option",{attrs:{label:"区域一",value:"shanghai"}}),e._v(" "),n("el-option",{attrs:{label:"区域二",value:"beijing"}})],1)],1)],1),e._v(" "),n("el-input",{attrs:{placeholder:"请输入内容",clearable:""},model:{value:e.form.search,callback:function(t){e.$set(e.form,"search",t)},expression:"form.search"}}),e._v(" "),n("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.search}},[e._v("搜索")]),e._v(" "),n("el-button",{attrs:{type:"success",icon:"el-icon-circle-plus"},nativeOn:{click:function(t){e.Addsys(t)}}},[e._v("新增")]),e._v(" "),n("el-button",{attrs:{loading:e.downloadLoading,disabled:e.loading,type:"primary",icon:"el-icon-share"},nativeOn:{click:function(t){e.handleDownload(t)}}},[e._v("导出")]),e._v(" "),n("el-button",{attrs:{type:"danger",disabled:e.candel,icon:"el-icon-delete"},nativeOn:{click:function(t){e.delrows(t)}}},[e._v("批量删除")]),e._v(" "),n("el-popover",{ref:"popover2",attrs:{placement:"bottom",title:"条件",trigger:"click",content:""}},[n("br"),e._v(" "),e._l(e.thArr,function(t,a){return n("div",{key:a},[n("el-checkbox",{attrs:{size:"middle"},model:{value:t.show,callback:function(n){e.$set(t,"show",n)},expression:"item.show"}},[e._v(e._s(t.name)+"\n          ")]),n("br"),n("br")],1)})],2),e._v(" "),n("el-button",{directives:[{name:"popover",rawName:"v-popover:popover2",arg:"popover2"}],staticClass:"filter",attrs:{type:"primary",size:"middle"}},[e._v("筛选条目")])],1),e._v(" "),n("el-dialog",{attrs:{title:"新增信息","close-on-click-modal":!1,"close-on-press-escape":!1,"modal-append-to-body":!1,"lock-scroll":!1,visible:e.Visible.Add},on:{"update:visible":function(t){e.$set(e.Visible,"Add",t)}}},[n("el-form",{ref:"Addform",attrs:{"status-icon":!0,rules:e.config.rules,model:e.addDialog,"label-width":""}},e._l(e.thArr,function(t,a){return n("el-form-item",{key:a,attrs:{prop:t.key,label:t.name}},[n("el-input",{model:{value:e.addDialog[t.key],callback:function(n){e.$set(e.addDialog,t.key,n)},expression:"addDialog[item.key]"}})],1)})),e._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:e.CancelAdd}},[e._v("取 消")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(t){e.resetForm("Addform")}}},[e._v("重 置")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:e.SaveAdd}},[e._v("确 定")])],1)],1),e._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:!0,border:!0,"highlight-current-row":!0},on:{"selection-change":e.SelectionChange}},[n("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),e._l(e.thArr,function(t,a){return t.show?n("el-table-column",{key:a,attrs:{label:t.name},scopedSlots:e._u([{key:"default",fn:function(a){return[n("i",{staticClass:"fa",class:t.icon||""}),e._v(" "),n("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(a.row[t.key]))])]}}])}):e._e()}),e._v(" "),n("el-table-column",{attrs:{width:"280",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(n){e.handleEdit(t.$index,t.row)}}},[n("i",{staticClass:"fa fa-pencil"}),n("span",[e._v("编辑")])]),e._v(" "),n("el-button",{attrs:{size:"mini",type:"info"},on:{click:function(n){e.CheckDetail(t.$index,t.row)}}},[n("i",{staticClass:"fa fa-question-circle"}),n("span",[e._v("详情")])]),e._v(" "),n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(n){e.handleDelete(t.$index,t.row)}}},[n("span",[n("i",{staticClass:"fa fa-trash"}),e._v("删除")])])]}}])})],2),e._v(" "),n("el-dialog",{attrs:{title:"编辑信息","status-icon":!0,"close-on-click-modal":!1,"close-on-press-escape":!1,"modal-append-to-body":!1,"lock-scroll":!1,visible:e.Visible.Edit},on:{"update:visible":function(t){e.$set(e.Visible,"Edit",t)}}},[n("el-form",{ref:"Editform",attrs:{"status-icon":!0,rules:e.config.rules,model:e.editDialog,"label-width":""}},e._l(e.thArr,function(t,a){return n("el-form-item",{key:a,attrs:{prop:t.key,label:t.name}},[n("el-input",{model:{value:e.editDialog[t.key],callback:function(n){e.$set(e.editDialog,t.key,n)},expression:"editDialog[item.key]"}})],1)})),e._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:e.CancelAction}},[e._v("取 消")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(t){e.SaveEdit(e.editDialog)}}},[e._v("确 定")])],1)],1),e._v(" "),n("el-dialog",{attrs:{title:"详细信息","close-on-click-modal":!1,"close-on-press-escape":!1,"modal-append-to-body":!1,"lock-scroll":!1,visible:e.Visible.check},on:{"update:visible":function(t){e.$set(e.Visible,"check",t)}}},[n("el-form",{ref:"Detailform",attrs:{model:e.checkinfo,"label-width":""}},e._l(e.DataKeys,function(t,a){return n("el-form-item",{key:a,attrs:{label:t}},[n("el-input",{model:{value:e.checkinfo[t],callback:function(n){e.$set(e.checkinfo,t,n)},expression:"checkinfo[item]"}})],1)})),e._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:e.CancelAction}},[e._v("确 定")])],1)],1),e._v(" "),n("div",{staticClass:"block"},[n("el-pagination",{attrs:{"current-page":e.config.pagination.currentPage,"page-sizes":e.config.pagination.pageSizes,"page-size":e.config.pagination.pageSize,layout:e.config.pagination.display,total:e.totalCount},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},staticRenderFns:[]};var c=n("VU/8")(l,r,!1,function(e){n("xO1p")},null,null);t.a=c.exports},fZjL:function(e,t,n){e.exports={default:n("jFbC"),__esModule:!0}},jFbC:function(e,t,n){n("Cdx3"),e.exports=n("FeBl").Object.keys},lkl0:function(e,t){},oCH4:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});n("3pLw");var a=n("y6zN"),i={name:"inforef",components:{baseTable:n("HiHq").a},data:function(){return{loadok:!1,InfoRefData:Object(a.a)("InfoRefData"),thArr:[{key:"srcName",name:"信息项名称",icon:"fa-map",show:!0,sort:!1},{key:"manage",name:"数据元",icon:"fa-user",show:!0,sort:!1},{key:"linkSys",name:"数据元长度",icon:"fa-cny",show:!0,sort:!1},{key:"status",name:"所属部门",icon:"fa-send",show:!0,sort:!1}],config:{pagination:{pageSizes:[5,10,15,25],pageSize:10,display:"total, sizes, prev, pager, next, jumper",currentPage:1},rules:{srcName:[{type:"string",required:!0,message:"必填项呢！",trigger:"blur"}],manage:[{type:"string",required:!0,message:"必填项呢！",trigger:"blur"}],linkSys:[{required:!0,message:"必填项呢！",trigger:"blur"}],status:[{required:!0,message:"必填项呢！",trigger:"blur"}]},handle:{canEdit:!0,canDelete:!0,showDetail:!0}}}},created:function(){var e=[];if(!Object(a.a)("srcflag")){for(var t=0;t<100;t++)e.push({srcName:"资源名称"+t,manage:"管理方式"+t,linkSys:100+t,status:"珠海中心"+t,id:Math.ceil((new Date).getTime()*(Math.random()+.5))});this.InfoRefData=e,Object(a.b)("srcflag",!0)}},watch:{InfoRefData:{handler:function(e,t){Object(a.b)("InfoRefData",e)},deep:!0}},methods:{update:function(e){this.thArr=e},saveinfo:function(e){this.InfoRefData.unshift(e),this.$message({type:"success",message:"添加成功！"})},saveEdit:function(e){var t=this,n=e.id;this.InfoRefData.forEach(function(a){a.id===n&&(a.srcName=e.srcName,a.metaType=e.metaType,a.manage=e.manage,a.linkSys=e.linkSys,a.status=e.status,t.$message({type:"success",message:"修改成功！"}))})},selecting:function(e){},deleteRow:function(e){var t=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.InfoRefData.splice(t.InfoRefData.indexOf(e),1),t.$message({type:"success",message:"删除成功!"})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},delrows:function(e){var t=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.forEach(function(e){t.InfoRefData.splice(t.InfoRefData.indexOf(e),1)}),t.$message({type:"success",message:"删除成功!"})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})}}},o={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{},[n("base-table",{attrs:{totalData:e.InfoRefData||[],thArr:e.thArr||[],config:e.config||{}},on:{addinfo:e.saveinfo,theadvar:e.update,saveedit:e.saveEdit,selecting:e.selecting,deleteRow:e.deleteRow,delrows:e.delrows}})],1)},staticRenderFns:[]};var s=n("VU/8")(i,o,!1,function(e){n("lkl0")},null,null);t.default=s.exports},uqUo:function(e,t,n){var a=n("kM2E"),i=n("FeBl"),o=n("S82l");e.exports=function(e,t){var n=(i.Object||{})[e]||Object[e],s={};s[e]=t(n),a(a.S+a.F*o(function(){n(1)}),"Object",s)}},xO1p:function(e,t){}});
//# sourceMappingURL=2.17402bddb3d2adff8661.js.map