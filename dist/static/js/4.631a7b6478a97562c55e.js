webpackJsonp([4],{"2GUO":function(e,t){},"4U6H":function(e,t){},"E/TR":function(e,t){e.exports=function(){return Function.call.apply(Array.prototype.concat,arguments)}},USpF:function(e,t){},XPNC:function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=l("dXij"),i=l.n(n),a=l("c/Tr"),s=l.n(a),r=l("7+uW");function d(e,t){var l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=[];return s()(e).forEach(function(e){void 0===e._expanded&&r.default.set(e,"_expanded",t);var a=1;if(void 0!==n&&null!==n&&(a=n+1),r.default.set(e,"_level",a),l&&r.default.set(e,"parent",l),i.push(e),e.children&&e.children.length>0){var s=d(e.children,t,e,a);i=i.concat(s)}}),i}var o={name:"treeTable",props:{data:{type:[Array,Object],required:!0},columns:{type:Array,default:function(){return[]}},rules:{type:Object,default:function(){}},evalFunc:Function,evalArgs:Array,expandAll:{type:Boolean,default:!1}},data:function(){return{editwhich:null,addwhich:null,editDialog:{},addDialog:{},Visible:{Add:!1,Edit:!1}}},created:function(){var e=this;this.columns.forEach(function(t){e.editDialog[t.value]=null,e.addDialog[t.value]=null})},computed:{formatData:function(){var e=void 0;e=Array.isArray(this.data)?this.data:[this.data];var t=this.evalFunc||d,l=this.evalArgs?i()([e,this.expandAll],this.evalArgs):[e,this.expandAll];return t.apply(null,l)}},methods:{showRow:function(e){var t=!e.row.parent||e.row.parent._expanded&&e.row.parent._show;return e.row._show=t,t?"animation:treeTableShow 1s;-webkit-animation:treeTableShow 1s;":"display:none;"},toggleExpanded:function(e){var t=this.formatData[e];t._expanded=!t._expanded},iconShow:function(e,t){return 0===e&&t.children&&t.children.length>0},handleEdit:function(e,t){var l=this;this.Visible.Edit=!0,this.editwhich=t,this.columns.forEach(function(e){l.editDialog[e.value]=t[e.value]})},CancelEdit:function(){this.Visible.Edit=!1,this.resetForm("editform")},SaveEdit:function(){var e=this;e.$refs.editform.validate(function(t){t?(e.columns.forEach(function(t){e.editwhich[t.value]=e.editDialog[t.value]}),e.$message({type:"success",message:"保存成功，请点击确认做统一提交！"}),e.resetForm("editform"),e.Visible.Edit=!1):e.$message({type:"warning",message:"验证失败！"})})},handleDelete:function(e,t){var l=this;this.$confirm("此操作将永久删除该层菜单, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e=t.parent.children,n=e.findIndex(function(e){return e.id===t.id});e.splice(n,1),l.$message({type:"success",message:"删除成功!"})}).catch(function(){l.$message({type:"info",message:"已取消删除"})})},handleAdd:function(e,t){this.addwhich=t,this.Visible.Add=!0},CancelAdd:function(){this.$refs.addform.resetFields(),this.Visible.Add=!1},SaveAdd:function(){var e=this;this.$refs.addform.validate(function(t){if(t){var l={};e.columns.forEach(function(t){l[t.value]=e.addDialog[t.value]}),l._level=e.addwhich._level+1,l._expanded=!0,l._show=!0,l.children=[],l.parent=e.addwhich,e.addwhich.children||(e.addwhich.children=[]),e.addwhich.children.push(l),e.$message({type:"success",message:"保存成功，请点击确认做统一提交！"}),e.resetForm("addform"),e.Visible.Add=!1}else e.$message({type:"warning",message:"验证失败！"})})},resetForm:function(e){this.$refs[e].resetFields()}}},u={render:function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{attrs:{id:"treetable"}},[l("el-table",e._b({attrs:{data:e.formatData,"row-style":e.showRow,border:!0,"highlight-current-row":!0}},"el-table",e.$attrs,!1),[0===e.columns.length?l("el-table-column",{attrs:{width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._l(t.row._level,function(e){return l("span",{key:e,staticClass:"ms-tree-space"})}),e._v(" "),e.iconShow(0,t.row)?l("span",{staticClass:"tree-ctrl",on:{click:function(l){e.toggleExpanded(t.$index)}}},[t.row._expanded?l("i",{staticClass:"el-icon-minus"}):l("i",{staticClass:"el-icon-plus"})]):e._e(),e._v("\n        "+e._s(t.$index)+"\n      ")]}}])}):e._l(e.columns,function(t,n){return l("el-table-column",{key:t.value,attrs:{label:t.text,width:t.width},scopedSlots:e._u([{key:"default",fn:function(i){return[e._l(i.row._level,function(t){return 0===n?l("span",{key:t,staticClass:"ms-tree-space"}):e._e()}),e._v(" "),e.iconShow(n,i.row)?l("span",{staticClass:"tree-ctrl",on:{click:function(t){e.toggleExpanded(i.$index)}}},[i.row._expanded?l("i",{staticClass:"el-icon-minus"}):l("i",{staticClass:"el-icon-plus"})]):e._e(),e._v("\n        "+e._s(i.row[t.value])+"\n      ")]}}])})}),e._v(" "),l("el-table-column",{attrs:{width:"280",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(){return e.handleEdit(t.$index,t.row)}}},[l("i",{staticClass:"fa fa-pencil"}),l("span",[e._v("修改")])]),e._v(" "),l("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(){return e.handleAdd(t.$index,t.row)}}},[l("i",{staticClass:"fa fa-plus"}),l("span",[e._v("新增")])]),e._v(" "),l("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(){return e.handleDelete(t.$index,t.row)}}},[l("span",[l("i",{staticClass:"fa fa-trash"}),e._v("删除")])])]}}])}),e._v(" "),e._t("default")],2),e._v(" "),l("el-dialog",{attrs:{title:"新增菜单","close-on-click-modal":!1,"close-on-press-escape":!1,"modal-append-to-body":!1,visible:e.Visible.Add},on:{"update:visible":function(t){e.$set(e.Visible,"Add",t)}}},[l("el-form",{ref:"addform",attrs:{"status-icon":!0,model:e.addDialog,rules:e.rules,"label-width":""}},e._l(e.columns,function(t,n){return l("el-form-item",{key:n,attrs:{prop:t.value,label:t.text}},[l("el-input",{model:{value:e.addDialog[t.value],callback:function(l){e.$set(e.addDialog,t.value,l)},expression:"addDialog[item.value]"}})],1)})),e._v(" "),l("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{attrs:{type:"primary"},on:{click:e.CancelAdd}},[e._v("取 消")]),e._v(" "),l("el-button",{attrs:{type:"primary"},on:{click:e.SaveAdd}},[e._v("确 定")])],1)],1),e._v(" "),l("el-dialog",{attrs:{title:"修改菜单","close-on-click-modal":!1,"close-on-press-escape":!1,"modal-append-to-body":!1,visible:e.Visible.Edit},on:{"update:visible":function(t){e.$set(e.Visible,"Edit",t)}}},[l("el-form",{ref:"editform",attrs:{"status-icon":!0,rules:e.rules,model:e.editDialog,"label-width":""}},e._l(e.columns,function(t,n){return l("el-form-item",{key:n,attrs:{prop:t.value,label:t.text}},[l("el-input",{model:{value:e.editDialog[t.value],callback:function(l){e.$set(e.editDialog,t.value,l)},expression:"editDialog[item.value]"}})],1)})),e._v(" "),l("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{attrs:{type:"primary"},on:{click:e.CancelEdit}},[e._v("取 消")]),e._v(" "),l("el-button",{attrs:{type:"primary"},on:{click:e.SaveEdit}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var c=0,f={components:{treeTable:l("VU/8")(o,u,!1,function(e){l("4U6H"),l("USpF")},"data-v-133f391a",null).exports},data:function(){var e=[{id:"序号"+c++,label:"我的面板",fund:5753,children:[{id:"序号"+c++,label:"部门信息",fund:123,children:null},{id:"序号"+c++,label:"数据概览",fund:226,children:null},{id:"序号"+c++,label:"信息系统",fund:null,children:[{id:"序号"+c++,label:"在建系统",fund:456,children:null},{id:"序号"+c++,label:"拟建系统",fund:987,children:null}]}]},{id:"序号"+c++,label:"我的面板2",fund:57527,children:[{id:"序号"+c++,label:"部门信息2",fund:123,children:null},{id:"序号"+c++,label:"数据概览2",fund:226,children:null},{id:"序号"+c++,label:"信息系统2",fund:3689,children:[{id:"序号"+c++,label:"在建系统2",fund:456,children:null},{id:"序号"+c++,label:"拟建系统2",fund:987,children:null}]}]}];return{data:e,Rules:{id:[{type:"string",required:!0,message:"必填项呢！",trigger:"blur"}],label:[{type:"string",required:!0,message:"必填项呢！",trigger:"blur"}],fund:[{type:"string",required:!0,message:"必填项呢！",trigger:"blur"}]},columns:[{value:"id",text:"序号"},{value:"label",text:"标签"},{value:"fund",text:"金额"}]}},methods:{}},h={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"treetable"},[t("tree-Table",{attrs:{data:this.data,columns:this.columns,rules:this.Rules}})],1)},staticRenderFns:[]};var p=l("VU/8")(f,h,!1,function(e){l("2GUO")},null,null);t.default=p.exports},dXij:function(e,t,l){e.exports={default:l("E/TR"),__esModule:!0}}});
//# sourceMappingURL=4.631a7b6478a97562c55e.js.map